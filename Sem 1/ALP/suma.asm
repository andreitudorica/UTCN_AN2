DATA SEGMENT PARA PUBLIC 'data'
PART1 DB "This program will calculate the sum until 0 is inserted$"
SUM DB ?
NEWLINE DB "",10,13,"$"
ENDMSG DB "Press any key to continue. . .$"
DATA ENDS

CODE SEGMENT PARA PUBLIC 'code'
EX PROC FAR
ASSUME CS:CODE, DS:DATA

	PUSH 	DS
	XOR 	AX,AX
	PUSH 	AX
	MOV 	AX,DATA
	MOV 	DS,AX

	MOV 	SI,1
	XOR 	DL,DL
	PUSH 	DX

	MOV 	AH,09H
	MOV 	DX,OFFSET PART1
	INT 	21H

	MOV 	DX,OFFSET NEWLINE
	INT 	21H

TOLOOP:

	MOV 	AH,01H	;Citim numarul
	INT 	21H

	SUB 	AL,"0"
	XOR 	AH,AH
	POP 	DX
	ADD 	DL,AL
	PUSH 	DX
	INC 	SI
	CMP 	AL,AH
JE FINAL

	MOV 	AH,02H
	XOR 	DX,DX
	ADD 	DX,"+"
	INT 	21H

	XOR 	AH,AH
	CMP 	AL,AH
LOOPNE TOLOOP

FINAL:
	MOV 	AH,02H
	XOR 	DX,DX
	ADD 	DL,"="
	INT 	21H

	POP 	DX
	MOV 	BL,10
	MOV 	AX,DX
	DIV 	BL

	XOR 	DX,DX

	PUSH 	AX
	MOV 	DL,AL
	ADD 	DL,"0"
	MOV 	AH,02H
	INT 	21H

	POP 	AX
	MOV 	DL,AH
	ADD 	DL,"0"
	MOV 	AH,02H
	INT 	21H

	MOV 	AH,09H
	MOV 	DX,OFFSET NEWLINE
	INT 	21H

	MOV 	DX,OFFSET ENDMSG
	INT 	21H

	MOV 	AH,08H
	INT 	21H

RET

EX ENDP
CODE ENDS
END EX